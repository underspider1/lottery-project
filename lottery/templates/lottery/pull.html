{% extends 'base.html' %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pull</title>
</head>
<body>
    {% block content %}
        {% if banner %}
            <h1>{{ banner.name }}</h1>
            <p>Gems: <span id="gems">{{ user.profile.balance }}</span> </p> <p>

            <select id="banner-select" style="display: none;">
                <option value="{{ banner.id }}" selected>{{ banner.name }}</option>
            </select>

            <button id="spin-button" data-url="{% url 'pull' banner.id %}">Pull!</button><!--- data-url is required -->
            <div id="result"></div> <!--- Area to display pull results -->
        {% else %}
            <p>No banner selected or available.</p>
        {% endif %}

        <a href="{% url 'home' %}">Back Home</a> <p> <!--- Moved outside the conditional -->
            {% csrf_token %} <!--- This line must be present in your template. Usually it is within <form> tag, but in your case it can be anywhere -->
                <script>
                    const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;  // Get the token value
                </script>
        <script src="{% static 'js/pull.js' %}" type="module"></script>  <!--- JavaScript at the end -->
    {% endblock %}
</body>
</html>