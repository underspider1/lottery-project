{% extends 'base.html' %}
{% load static %}
{% block title %}Gacha{% endblock %} 

{% block content %}

    {% if banner %}
        <h1>{{ banner.name }}</h1>

        <p>Gems: <span id="gems">{{ user.profile.balance }}</span> </p>

        <select id="banner-select" style="display: none;">
            <option value="{{ banner.id }}" selected>{{ banner.name }}</option>
        </select>

        <form id="pull-form" method="post" action="{% url 'pull' banner.id %}">
            {% csrf_token %}
            <button id="spin-button" type="submit">Pull!</button>
            <div id="result"></div>  </form> <!--- Closing form tag added, div moved inside -->

        {% if user.is_authenticated %} <!--- Conditionally include the script. -->
            <script src="{% static 'js/pull.js' %}" type="module"></script> 
        {% endif %}

    {% else %}  
        <p>No banner selected or available.</p>  
    {% endif %}

    <a href="{% url 'home' %}">Back Home</a> 

{% endblock %}